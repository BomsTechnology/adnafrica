import{a as i,b as p}from"./index.959372bf.js";import{r as u}from"./app.4eaf8dc0.js";function C(){const s=u([]),r=u(0),n=u([]),o=u([]),t=u([]),c=u(!1),v=async()=>{s.value=[],t.value=[];try{r.value=1;let e=await i.get("/countries");n.value=e.data.data,r.value=2,n.value.forEach(a=>{t.value.push({id:a.id,value:!1})})}catch(e){if(r.value=0,e.response.status==422)for(const a in e.response.data.errors)s.value.push(e.response.data.errors[a][0].replace("id",""));else e.response.status==401?(localStorage.removeItem("user"),localStorage.removeItem("tokenUser"),localStorage.removeItem("recent_search"),location.href="/"):s.value.push(e.response.data.message)}};return{chks:t,chkAll:c,errors:s,loading:r,checkAll:async()=>{c.value?t.value.forEach(e=>{e.value||(e.value=!0,o.value.push(e.id))}):(t.value.forEach(e=>{e.value=!1}),o.value=[])},cleanErrors:()=>{s.value=[]},countries:n,getCountries:v,updateCountry:async(e,a)=>{s.value=[];try{r.value=1,await p.post(`/countries/${a}`,e),r.value=2}catch(l){if(r.value=0,l.response.status==422)for(const m in l.response.data.errors)s.value.push(l.response.data.errors[m][0].replace("id",""));else l.response.status==401?(localStorage.removeItem("user"),localStorage.removeItem("tokenUser"),localStorage.removeItem("recent_search"),location.href="/"):s.value.push(l.response.data.message)}},createCountry:async e=>{s.value=[];try{r.value=1,await p.post("/countries",e),r.value=2}catch(a){if(r.value=0,a.response.status==422)for(const l in a.response.data.errors)s.value.push(a.response.data.errors[l][0].replace("id",""));else a.response.status==401?(localStorage.removeItem("user"),localStorage.removeItem("tokenUser"),localStorage.removeItem("recent_search"),location.href="/"):s.value.push(a.response.data.message)}},deleteCountries:async()=>{s.value=[];try{await i.delete(`/countries/${JSON.stringify(o.value)}`),o.value=[],await v()}catch(e){if(r.value=0,e.response.status==422)for(const a in e.response.data.errors)s.value.push(e.response.data.errors[a][0].replace("id",""));else e.response.status==401?(localStorage.removeItem("user"),localStorage.removeItem("tokenUser"),localStorage.removeItem("recent_search"),location.href="/"):s.value.push(e.response.data.message)}},toogleDeleteArray:async e=>{if(t.value[e].value)o.value.push(t.value[e].id);else{let a=o.value.indexOf(t.value[e].id);o.value.splice(a,1)}}}}export{C as u};
