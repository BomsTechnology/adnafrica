import{s as T,r as f,I as z,b as F,c as a,a as e,d,f as l,O as L,v as u,z as C,g as y,W as E,X as O,F as R,q as P,j as W,m as V,o as r,t as X}from"./app.4eaf8dc0.js";import{u as Y}from"./countryServices.766f9053.js";import{r as G}from"./TrashIcon.4c73878a.js";import"./index.959372bf.js";const H={class:"h-full p-8"},J=e("h1",{class:"text-3xl font-bold"},"Country",-1),K={class:"space-x-0 space-y-4 py-6 lg:flex lg:space-x-4 lg:space-y-0"},Q={class:"lg:w-[40%]"},Z={class:"w-full bg-white p-6 shadow-md sm:rounded-lg"},ee={class:"text-xl font-semibold underline decoration-primary-color decoration-dotted decoration-2 underline-offset-2"},te={key:0},se={key:1},oe=W(" Country "),le={class:""},ne=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Country Name",-1),ae={key:0,class:"mt-2"},re=e("label",{class:"mb-2 block text-sm font-medium text-gray-900",for:"file_input"},"Image",-1),ce={class:"flex space-x-3"},ie={key:0,class:"h-10 w-10 overflow-hidden rounded-full"},de=["src","alt"],ue=["required"],me={class:"mt-6"},pe={key:0,type:"button",disabled:"",class:"flex w-full transform items-center justify-center rounded-md bg-secondary-color px-4 py-2 tracking-wide text-white focus:outline-none"},he={key:1,type:"submit",class:"w-full transform rounded-md bg-primary-color px-4 py-2 text-sm tracking-wide text-white transition-colors duration-200 hover:bg-secondary-color focus:bg-primary-color focus:outline-none"},_e={class:"lg:w-[60%]"},ge={class:"relative w-full overflow-x-auto bg-white shadow-md sm:rounded-lg"},fe={class:"items-center justify-between p-4 lg:flex"},ye={class:"mt-1 items-center space-y-1 lg:flex lg:space-y-0 lg:space-x-2"},be=e("label",{for:"table-search",class:"sr-only"},"Search",-1),xe={class:"relative"},ve=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"h-5 w-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),we={class:"mt-1 flex justify-end lg:mt-0 lg:block"},ke=e("span",{class:"hidden text-sm font-thin lg:block"},"Supprimer",-1),Ce={class:"w-full text-left text-sm text-gray-500"},Ee={class:"bg-gray-50 text-xs uppercase text-gray-700"},Ve={scope:"col",class:"p-4"},je={class:"flex items-center"},Ne=e("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox",-1),Se=e("th",{scope:"col",class:"px-6 py-3"},"Name",-1),Ue=e("th",{scope:"col",class:"px-6 py-3"},"Image",-1),Me=e("th",{scope:"col",class:"px-6 py-3"},[e("span",{class:"sr-only"},"Edit")],-1),$e={key:0},Ae={colspan:"4"},qe={class:"flex w-full items-center justify-center p-3 text-center"},Be={class:"w-4 p-4"},De={class:"flex items-center"},Ie=["onUpdate:modelValue","onChange"],Te=e("label",{for:"checkbox-table-search-1",class:"sr-only"},"checkbox",-1),ze={scope:"row",class:"whitespace-nowrap px-6 py-4 font-medium text-gray-900"},Fe={class:"px-6 py-4"},Le=["src","alt"],Oe={class:"px-6 py-4 text-right"},Re=["onClick"],Pe={key:2},We=e("td",{colspan:"4",class:"p-3 text-center text-2xl font-bold"},[e("span",null,"NO COUNTRY")],-1),Xe=[We],Qe={__name:"Country",setup(Ye){const{chks:b,chkAll:m,errors:p,loading:x,checkAll:j,countries:N,cleanErrors:S,getCountries:v,updateCountry:U,createCountry:M,deleteCountries:$,toogleDeleteArray:A}=Y(),t=T({name:"",image:""}),h=f(""),c=f(!1),i=f(null),q=async()=>{let n=new FormData;n.append("name",t.name),n.append("image",t.image),c.value?(n.append("_method","PUT"),await U(n,t.id),p.value.length==[]&&(c.value=!1)):await M(n),p.value.length==[]&&(await v(),t.name="",t.name="",i.value?i.value.value=null:i.value=null)},w=z(()=>N.value.filter(n=>n.name.toLowerCase().includes(h.value.toLowerCase()))),B=async()=>{t.image=i.value.files[0]},D=async n=>{t.name=n.name,t.image=n.image,t.id=n.id,c.value=!0};return F(async()=>{await v()}),(n,o)=>{const I=V("Error"),k=V("Spin");return r(),a("div",H,[J,e("div",K,[e("div",Q,[e("div",Z,[e("h1",ee,[c.value?(r(),a("span",te,"Edit")):(r(),a("span",se,"Add")),oe]),d(I,{errors:l(p),onCleanErrors:l(S)},null,8,["errors","onCleanErrors"]),e("form",{class:"mt-4",onSubmit:o[2]||(o[2]=L(s=>q(),["prevent"]))},[e("div",le,[ne,u(e("input",{type:"text",id:"name",required:"","onUpdate:modelValue":o[0]||(o[0]=s=>t.name=s),autocomplete:"given-name",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[C,t.name]])]),t.parent==null||t.parent=="null"?(r(),a("div",ae,[re,e("div",ce,[c.value&&typeof t.image=="string"?(r(),a("div",ie,[t.image?(r(),a("img",{key:0,src:t.image,alt:t.name,class:"h-full w-full object-cover"},null,8,de)):y("",!0)])):y("",!0),e("input",{ref_key:"image",ref:i,required:!c.value,onChange:o[1]||(o[1]=s=>B()),class:"block w-full cursor-pointer rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 focus:outline-none",id:"file_input",accept:"image/*",type:"file"},null,40,ue)])])):y("",!0),e("div",me,[l(x)==1?(r(),a("button",pe,[d(k)])):(r(),a("button",he," Save "))])],32)])]),e("div",_e,[e("div",ge,[e("div",fe,[e("div",ye,[be,e("div",xe,[ve,u(e("input",{type:"search",id:"table-search","onUpdate:modelValue":o[3]||(o[3]=s=>h.value=s),class:"block w-full rounded border border-gray-300 bg-gray-50 p-2.5 pl-10 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 lg:w-80",placeholder:"Search for items"},null,512),[[C,h.value]])])]),e("div",we,[e("button",{type:"button",title:"delete",onClick:o[4]||(o[4]=s=>l($)()),class:"flex items-center justify-between space-x-2 rounded border border-red-500 p-2 text-red-500 hover:bg-red-500 hover:text-white"},[d(l(G),{class:"h-6 w-6"}),ke])])]),e("table",Ce,[e("thead",Ee,[e("tr",null,[e("th",Ve,[e("div",je,[u(e("input",{onChange:o[5]||(o[5]=s=>l(j)()),"onUpdate:modelValue":o[6]||(o[6]=s=>O(m)?m.value=s:null),id:"checkbox-all-search",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,544),[[E,l(m)]]),Ne])]),Se,Ue,Me])]),e("tbody",null,[l(x)==1?(r(),a("tr",$e,[e("td",Ae,[e("div",qe,[d(k,{width:"w-10",height:"h-10",color:"text-primary-color"})])])])):l(w).length!=0?(r(!0),a(R,{key:1},P(l(w),(s,_)=>(r(),a("tr",{key:s.id,class:"border-b bg-white hover:bg-gray-50"},[e("td",Be,[e("div",De,[u(e("input",{"onUpdate:modelValue":g=>l(b)[_].value=g,onChange:g=>l(A)(_),id:"checkbox-table-search-1",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,40,Ie),[[E,l(b)[_].value]]),Te])]),e("th",ze,X(s.name),1),e("td",Fe,[e("img",{src:s.image,alt:s.name,class:"h-5 w-8 object-cover"},null,8,Le)]),e("td",Oe,[e("button",{type:"button",onClick:g=>D(s),class:"font-medium text-blue-600 hover:underline"}," Edit ",8,Re)])]))),128)):(r(),a("tr",Pe,Xe))])])])])])])}}};export{Qe as default};
