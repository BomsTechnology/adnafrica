import{a as u}from"./index.959372bf.js";import{r as c}from"./app.4eaf8dc0.js";function I(){const r=c([]),s=c(0),n=c([]),o=c([]),t=c([]),v=c(!1),i=async()=>{r.value=[],t.value=[];try{s.value=1;let e=await u.get("/currencies");n.value=e.data.data,s.value=2,n.value.forEach(a=>{t.value.push({id:a.id,value:!1})})}catch(e){if(s.value=0,e.response.status==422)for(const a in e.response.data.errors)r.value.push(e.response.data.errors[a][0].replace("id",""));else e.response.status==401?(localStorage.removeItem("user"),localStorage.removeItem("tokenUser"),localStorage.removeItem("recent_search"),location.href="/"):r.value.push(e.response.data.message)}};return{chks:t,chkAll:v,errors:r,loading:s,checkAll:async()=>{v.value?t.value.forEach(e=>{e.value||(e.value=!0,o.value.push(e.id))}):(t.value.forEach(e=>{e.value=!1}),o.value=[])},cleanErrors:()=>{r.value=[]},currencies:n,getCurrencies:i,updateCurrency:async(e,a)=>{r.value=[];try{s.value=1,await u.put(`/currencies/${a}`,e),s.value=2}catch(l){if(s.value=0,l.response.status==422)for(const p in l.response.data.errors)r.value.push(l.response.data.errors[p][0].replace("id",""));else l.response.status==401?(localStorage.removeItem("user"),localStorage.removeItem("tokenUser"),localStorage.removeItem("recent_search"),location.href="/"):r.value.push(l.response.data.message)}},createCurrency:async e=>{r.value=[];try{s.value=1,await u.post("/currencies",e),s.value=2}catch(a){if(s.value=0,a.response.status==422)for(const l in a.response.data.errors)r.value.push(a.response.data.errors[l][0].replace("id",""));else a.response.status==401?(localStorage.removeItem("user"),localStorage.removeItem("tokenUser"),localStorage.removeItem("recent_search"),location.href="/"):r.value.push(a.response.data.message)}},deleteCurrencies:async()=>{r.value=[];try{await u.delete(`/currencies/${JSON.stringify(o.value)}`),o.value=[],await i()}catch(e){if(s.value=0,e.response.status==422)for(const a in e.response.data.errors)r.value.push(e.response.data.errors[a][0].replace("id",""));else e.response.status==401?(localStorage.removeItem("user"),localStorage.removeItem("tokenUser"),localStorage.removeItem("recent_search"),location.href="/"):r.value.push(e.response.data.message)}},toogleDeleteArray:async e=>{if(t.value[e].value)o.value.push(t.value[e].id);else{let a=o.value.indexOf(t.value[e].id);o.value.splice(a,1)}}}}export{I as u};
