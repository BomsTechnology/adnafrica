import{a as n}from"./index.959372bf.js";import{r as o}from"./app.4eaf8dc0.js";function E(){const a=o([]),r=o(0),c=o([]),v=o([]),u=o([]),t=o([]),p=o(!1),i=async()=>{a.value=[],t.value=[];try{r.value=1;let e=await n.get("/users");c.value=e.data.data,r.value=2,c.value.forEach(s=>{t.value.push({id:s.id,value:!1})})}catch(e){if(r.value=0,e.response.status==422)for(const s in e.response.data.errors)a.value.push(e.response.data.errors[s][0].replace("id",""));else a.value.push(e.response.data.message)}};return{chks:t,chkAll:p,errors:a,loading:r,checkAll:async()=>{p.value?t.value.forEach(e=>{e.value||(e.value=!0,u.value.push(e.id))}):(t.value.forEach(e=>{e.value=!1}),u.value=[])},cleanErrors:()=>{a.value=[]},user:v,users:c,getUser:async e=>{a.value=[];try{r.value=1;let s=await n.get(`/users/${e}`);v.value=s.data.data,r.value=2}catch(s){if(r.value=0,s.response.status==422)for(const l in s.response.data.errors)a.value.push(s.response.data.errors[l][0].replace("id",""));else a.value.push(s.response.data.message)}},getUsers:i,updateUser:async(e,s)=>{a.value=[];try{r.value=1,await n.put(`/users/${s}`,e),r.value=2}catch(l){if(r.value=0,l.response.status==422)for(const d in l.response.data.errors)a.value.push(l.response.data.errors[d][0].replace("id",""));else a.value.push(l.response.data.message)}},createUser:async e=>{a.value=[];try{r.value=1,await n.post("/users",e),r.value=2}catch(s){if(r.value=0,s.response.status==422)for(const l in s.response.data.errors)a.value.push(s.response.data.errors[l][0].replace("id",""));else a.value.push(s.response.data.message)}},deleteUsers:async()=>{a.value=[];try{await n.delete(`/users/${JSON.stringify(u.value)}`),u.value=[],await i()}catch(e){if(r.value=0,e.response.status==422)for(const s in e.response.data.errors)a.value.push(e.response.data.errors[s][0].replace("id",""));else a.value.push(e.response.data.message)}},toogleDeleteArray:async e=>{if(t.value[e].value)u.value.push(t.value[e].id);else{let s=u.value.indexOf(t.value[e].id);u.value.splice(s,1)}}}}export{E as u};
