import{o as n,c,a as o,r as V,s as j,b as R,f as e,v,x as B,n as f,F as C,q as M,t as w,d as y,g as m,y as q,z as H,e as O,A,m as F}from"./app.4eaf8dc0.js";import{u as L,b as P,o as E}from"./index.62ff3478.js";import{u as I}from"./categoryServices.efc14ec4.js";import{a as D}from"./index.959372bf.js";import{r as T}from"./ChevronRightIcon.31446942.js";import{r as J}from"./RectangleStackIcon.44f93839.js";import{r as Q}from"./ChevronDownIcon.47424bbb.js";import{r as U}from"./MagnifyingGlassIcon.a5535f89.js";import{r as G}from"./MapPinIcon.b740d8ae.js";function K(u,x){return n(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M11.03 3.97a.75.75 0 010 1.06l-6.22 6.22H21a.75.75 0 010 1.5H4.81l6.22 6.22a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0z","clip-rule":"evenodd"})])}function Ne(u,x){return n(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"})])}function W(u,x){return n(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[o("path",{d:"M15 3.75H9v16.5h6V3.75zM16.5 20.25h3.375c1.035 0 1.875-.84 1.875-1.875V5.625c0-1.036-.84-1.875-1.875-1.875H16.5v16.5zM4.125 3.75H7.5v16.5H4.125a1.875 1.875 0 01-1.875-1.875V5.625c0-1.036.84-1.875 1.875-1.875z"})])}function X(){const{categories:u,getCategories:x}=I(),g=V([]),$=V([]),p=V(0),s=j({gender:"",keywords:"",location:"",type:"",category:"",criteria:[]}),d=j({filter:!1,modal:!1,category:!0,subCategory:!1}),r=j({category:null,subCategory:"all"}),S=async l=>{await x(),s.gender=l.gender,s.keywords=l.keywords,s.location=l.location,s.type=l.type,l.category!="all"?await b(l.category):(s.category=l.category,r.subCategory=l.category)},h=async l=>{r.category=l,d.category=!1,d.subCategory=!0},k=async l=>{s.category=l=="all"?"all":l.id,r.subCategory=l,d.modal=!1,_()},_=async()=>{d.category=!0,d.subCategory=!1},b=async l=>{for(let t=0;t<u.value.length;t++)if(u.value[t].id==l){k(u.value[t]);return}else if(u.value[t].children.length!=0){for(let i=0;i<u.value[t].children.length;i++)if(u.value[t].children[i].id==l){k(u.value[t].children[i]);return}}};return{searchResult:$,searching:async()=>{g.value=[];try{p.value=1;let l=await D.get(`/search/${JSON.stringify(s)}`);$.value=l.data.data,p.value=2}catch(l){if(p.value=0,l.response.status==422)for(const t in l.response.data.errors)g.value.push(l.response.data.errors[t][0].replace("id",""));else g.value.push(l.response.data.message)}},errors:g,loading:p,searchData:s,showCategory:d,selectCategory:r,selectedCategory:h,saveRecentSearch:async(l,t)=>{g.value=[];try{p.value=1;let z=(await D.get(`/search-save-recent/${l}/${t}`)).data.data;localStorage.setItem("recent_search",z.recent_search),p.value=2}catch(i){if(p.value=0,i.response.status==422)for(const z in i.response.data.errors)g.value.push(i.response.data.errors[z][0].replace("id",""));else g.value.push(i.response.data.message)}},selectedSubCategory:k,returnCategory:_,categories:u,filterCategory:b,mount:S}}const Y={key:0,class:"fixed top-0 z-10 flex h-full w-full items-center bg-black/25 px-8 lg:hidden"},Z={class:"overflow-y-auto p-2"},ee=["onClick"],te={class:"overflow-y-auto p-2"},oe=["onClick"],re={class:"mx-auto w-full rounded bg-white p-8 shadow-md lg:w-[1000px]"},le={class:"relative mb-6 grid grid-cols-2 gap-2 lg:grid-cols-9"},se={class:"h-full w-1/3 border-r py-4 px-6 text-sm"},ae=["onClick"],ne={class:"h-full w-2/3 overflow-y-auto py-4 px-2 text-sm"},ce=["onClick"],de={class:"relative lg:col-span-2"},ie={class:"absolute left-3 top-3"},ue=o("option",{value:"all"},"Tout",-1),ye=o("option",{value:"company"},"Annuaire",-1),pe=o("option",{value:"ads"},"Annonce",-1),ge=[ue,ye,pe],he={class:"w-full whitespace-nowrap pl-4 text-xs lg:text-sm"},fe={key:0},ve={key:1},we={class:"relative lg:col-span-2"},xe={class:"absolute left-3 top-3"},be={class:"relative lg:col-span-2"},me={class:"absolute left-3 top-2"},ke={class:"col-span-2 lg:col-span-1"},_e={class:"flex items-center justify-center space-x-6"},Ce={class:"flex items-center justify-center space-x-2"},$e=o("h1",{class:"text-xs text-gray-500 lg:text-sm"},"Offres",-1),Se={class:"flex items-center justify-center space-x-2"},Me=o("h1",{class:"text-xs text-gray-500 lg:text-sm"},"Demande",-1),Re={__name:"SearchSection",props:{gender:{type:String,default:"all"},keywords:{type:String,default:""},location:{type:String,default:""},type:{type:String,default:"offer"},category:{type:String,default:"all"}},setup(u){const x=u,$=L(P).greater("lg"),{mount:p,searchData:s,showCategory:d,selectCategory:r,selectedCategory:S,selectedSubCategory:h,returnCategory:k,categories:_}=X(),b=V(null);return R(async()=>{p({...x})}),E(b,()=>{d.modal=!1}),(N,a)=>{const l=F("router-link");return n(),c(C,null,[e(d).modal?(n(),c("div",Y,[o("div",{ref_key:"categoryModal",ref:b,class:"h-4/5 w-full rounded-md bg-white"},[v(o("div",Z,[o("button",{onClick:a[0]||(a[0]=t=>e(h)("all")),type:"button",class:f([e(r).subCategory=="all"?"block w-full whitespace-nowrap rounded bg-secondary-color/25 p-2 text-left text-sm font-bold text-primary-color hover:bg-secondary-color hover:text-white":"block w-full whitespace-nowrap rounded p-2 text-left text-sm hover:bg-secondary-color hover:font-bold hover:text-white"])}," Toutes Cat\xE9gories ",2),(n(!0),c(C,null,M(e(_),t=>(n(),c("button",{type:"button",key:t.id,onClick:i=>e(S)(t),class:f([e(r).subCategory!="all"&&e(r).category!=null&&e(r).category.id==t.id?"group flex w-full justify-between rounded bg-secondary-color/25 p-2 text-left text-sm font-bold text-primary-color hover:bg-secondary-color hover:text-white":" group flex w-full justify-between rounded p-2 text-left text-sm hover:bg-secondary-color hover:text-white"])},[o("span",null,w(t.name),1),o("span",null,[y(e(T),{class:"h-5 w-5 stroke-secondary-color text-white"})])],10,ee))),128))],512),[[B,e(d).category]]),v(o("div",te,[o("button",{type:"button",onClick:a[1]||(a[1]=t=>e(k)()),class:"mb-4 block w-auto rounded bg-secondary-color p-2 text-white"},[y(e(K),{class:"h-5 w-5"})]),e(r).category?(n(),c("button",{key:0,onClick:a[2]||(a[2]=t=>e(h)(e(r).category)),type:"button",class:f([e(r).subCategory.id==e(r).category.id?"block w-full whitespace-nowrap rounded bg-secondary-color/25 p-2 text-left text-sm font-bold text-primary-color hover:bg-secondary-color hover:text-white":"block w-full whitespace-nowrap rounded p-2 text-left text-sm hover:bg-secondary-color hover:font-bold hover:text-white"])},w(e(r).category.name),3)):m("",!0),e(r).category&&e(r).category.children.length!=0?(n(!0),c(C,{key:1},M(e(r).category.children,t=>(n(),c("button",{onClick:i=>e(h)(t),key:t.id,type:"button",class:f([e(r).subCategory.id==t.id?"block w-full whitespace-nowrap rounded bg-secondary-color/25 p-2 text-left text-sm font-bold text-primary-color hover:bg-secondary-color hover:text-white":"block w-full whitespace-nowrap rounded p-2 text-left text-sm hover:bg-secondary-color hover:font-bold hover:text-white"])},w(t.name),11,oe))),128)):m("",!0)],512),[[B,e(d).subCategory]])],512)])):m("",!0),o("form",re,[o("div",le,[e(d).modal&&e($)?(n(),c("div",{key:0,ref_key:"categoryModal",ref:b,class:"absolute top-14 left-0 z-10 hidden h-96 w-full rounded-md bg-white shadow-xl lg:flex"},[o("div",se,[o("button",{onClick:a[3]||(a[3]=t=>e(h)("all")),type:"button",class:f([e(r).subCategory=="all"?"block w-full whitespace-nowrap rounded bg-secondary-color/25 p-2 text-left font-bold text-primary-color hover:bg-secondary-color hover:text-white":"block w-full whitespace-nowrap rounded p-2 text-left hover:bg-secondary-color hover:font-bold hover:text-white"])}," Toutes Cat\xE9gories ",2),(n(!0),c(C,null,M(e(_),t=>(n(),c("button",{type:"button",key:t.id,onClick:i=>e(S)(t),class:f([e(r).subCategory!="all"&&e(r).category!=null&&e(r).category.id==t.id?"group flex w-full justify-between rounded bg-secondary-color/25 p-2 text-left font-bold text-primary-color hover:bg-secondary-color hover:text-white":" group flex w-full justify-between rounded p-2 text-left hover:bg-secondary-color hover:text-white"])},[o("span",null,w(t.name),1),o("span",null,[y(e(T),{class:"hidden h-5 w-5 stroke-white text-white group-hover:block"})])],10,ae))),128))]),o("div",ne,[e(r).category?(n(),c("button",{key:0,onClick:a[4]||(a[4]=t=>e(h)(e(r).category)),type:"button",class:f([e(r).subCategory.id==e(r).category.id?"block w-1/2 whitespace-nowrap rounded bg-secondary-color/25 p-2 text-left font-bold text-primary-color hover:bg-secondary-color hover:text-white":"block w-1/2 whitespace-nowrap rounded p-2 text-left hover:bg-secondary-color hover:font-bold hover:text-white"])},w(e(r).category.name),3)):m("",!0),e(r).category&&e(r).category.children.length!=0?(n(!0),c(C,{key:1},M(e(r).category.children,t=>(n(),c("button",{onClick:i=>e(h)(t),key:t.id,type:"button",class:f([e(r).subCategory.id==t.id?"block w-1/2 whitespace-nowrap rounded  bg-secondary-color/25 p-2 text-left font-bold text-primary-color hover:bg-secondary-color hover:text-white":"block w-1/2 whitespace-nowrap rounded p-2 text-left hover:bg-secondary-color hover:font-bold hover:text-white"])},w(t.name),11,ce))),128)):m("",!0)])],512)):m("",!0),o("div",de,[o("span",ie,[y(e(W),{class:"h-6 w-6 text-gray-400"})]),v(o("select",{class:"form-select block w-full rounded border border-gray-300 bg-gray-50 py-3 pl-12 text-xs text-gray-900 focus:border-primary-color focus:ring-primary-color lg:text-sm","onUpdate:modelValue":a[5]||(a[5]=t=>e(s).gender=t)},ge,512),[[q,e(s).gender]])]),o("div",{onClick:a[6]||(a[6]=t=>e(d).modal=!e(d).modal),class:"flex w-full cursor-pointer items-center justify-between overflow-x-hidden rounded border border-gray-300 bg-gray-50 p-2.5 text-xs text-gray-900 hover:bg-gray-100 lg:col-span-2 lg:text-sm"},[o("div",null,[y(e(J),{class:"h-6 w-6 text-gray-400"})]),o("div",he,[e(r).subCategory=="all"?(n(),c("span",fe," Toutes Cat\xE9gories ")):(n(),c("span",ve,w(e(r).subCategory.name),1))]),o("div",null,[y(e(Q),{class:"h-6 w-6 text-gray-400"})])]),o("div",we,[o("span",xe,[y(e(U),{class:"h-6 w-6 text-gray-400"})]),v(o("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=t=>e(s).keywords=t),class:"block w-full rounded border border-gray-300 bg-gray-50 py-3 pl-12 text-xs text-gray-900 focus:border-primary-color focus:ring-primary-color lg:text-sm",placeholder:"Que recherchez - vous ?"},null,512),[[H,e(s).keywords]])]),o("div",be,[o("span",me,[y(e(G),{class:"h-6 w-6 text-gray-400"})]),v(o("input",{type:"text",class:"block w-full rounded border border-gray-300 bg-gray-50 py-3 pl-12 text-xs text-gray-900 focus:border-primary-color focus:ring-primary-color lg:text-sm",placeholder:"Situ\xE9 \xE0...","onUpdate:modelValue":a[8]||(a[8]=t=>e(s).location=t)},null,512),[[H,e(s).location]])]),o("div",ke,[y(l,{to:{name:"search",query:{gender:e(s).gender,type:e(s).type,category:e(s).category,keywords:e(s).keywords,location:e(s).location}},type:"submit",class:"flex w-full justify-center rounded bg-primary-color px-5 py-3 text-center text-sm font-medium text-white hover:bg-secondary-color focus:outline-none focus:ring-4 focus:ring-blue-300"},{default:O(()=>[y(e(U),{class:"h-6 w-6"})]),_:1},8,["to"])])]),o("div",_e,[o("div",Ce,[v(o("input",{type:"radio","onUpdate:modelValue":a[9]||(a[9]=t=>e(s).type=t),value:"offer",class:"form-radio text-primary-color focus:border-primary-color focus:ring-primary-color"},null,512),[[A,e(s).type]]),$e]),o("div",Se,[v(o("input",{type:"radio","onUpdate:modelValue":a[10]||(a[10]=t=>e(s).type=t),value:"request",class:"form-radio text-primary-color focus:border-primary-color focus:ring-primary-color"},null,512),[[A,e(s).type]]),Me])])])],64)}}};export{Re as _,K as a,Ne as r,X as u};
