import{a as u}from"./index.959372bf.js";import{r as c}from"./app.4eaf8dc0.js";function I(){const s=c([]),t=c(0),n=c([]),o=c([]),r=c([]),i=c(!1),v=async()=>{s.value=[],r.value=[];try{t.value=1;let e=await u.get("/cities");n.value=e.data.data,t.value=2,n.value.forEach(a=>{r.value.push({id:a.id,value:!1})})}catch(e){if(t.value=0,e.response.status==422)for(const a in e.response.data.errors)s.value.push(e.response.data.errors[a][0].replace("id",""));else e.response.status==401?(localStorage.removeItem("user"),localStorage.removeItem("tokenUser"),localStorage.removeItem("recent_search"),location.href="/"):s.value.push(e.response.data.message)}};return{chks:r,chkAll:i,errors:s,loading:t,checkAll:async()=>{i.value?r.value.forEach(e=>{e.value||(e.value=!0,o.value.push(e.id))}):(r.value.forEach(e=>{e.value=!1}),o.value=[])},cleanErrors:()=>{s.value=[]},cities:n,getCities:v,updateCity:async(e,a)=>{s.value=[];try{t.value=1,await u.put(`/cities/${a}`,e),t.value=2}catch(l){if(t.value=0,l.response.status==422)for(const p in l.response.data.errors)s.value.push(l.response.data.errors[p][0].replace("id",""));else l.response.status==401?(localStorage.removeItem("user"),localStorage.removeItem("tokenUser"),localStorage.removeItem("recent_search"),location.href="/"):s.value.push(l.response.data.message)}},createCity:async e=>{s.value=[];try{t.value=1,await u.post("/cities",e),t.value=2}catch(a){if(t.value=0,a.response.status==422)for(const l in a.response.data.errors)s.value.push(a.response.data.errors[l][0].replace("id",""));else a.response.status==401?(localStorage.removeItem("user"),localStorage.removeItem("tokenUser"),localStorage.removeItem("recent_search"),location.href="/"):s.value.push(a.response.data.message)}},deleteCities:async()=>{s.value=[];try{await u.delete(`/cities/${JSON.stringify(o.value)}`),o.value=[],await v()}catch(e){if(t.value=0,e.response.status==422)for(const a in e.response.data.errors)s.value.push(e.response.data.errors[a][0].replace("id",""));else e.response.status==401?(localStorage.removeItem("user"),localStorage.removeItem("tokenUser"),localStorage.removeItem("recent_search"),location.href="/"):s.value.push(e.response.data.message)}},toogleDeleteArray:async e=>{if(r.value[e].value)o.value.push(r.value[e].id);else{let a=o.value.indexOf(r.value[e].id);o.value.splice(a,1)}}}}export{I as u};
