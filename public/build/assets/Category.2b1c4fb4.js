import{s as W,r as y,I as X,b as Y,c as a,a as e,d as v,f as l,O as H,v as d,z as I,y as J,F as x,q as U,g as m,W as w,X as K,j as Q,m as T,o as r,t as S}from"./app.4eaf8dc0.js";import{u as Z}from"./categoryServices.efc14ec4.js";import{r as ee}from"./TrashIcon.4c73878a.js";import"./index.959372bf.js";const te={class:"h-full p-8"},se=e("h1",{class:"text-3xl font-bold"},"Category",-1),oe={class:"space-x-0 space-y-4 py-6 lg:flex lg:space-x-4 lg:space-y-0"},le={class:"lg:w-[40%]"},ne={class:"w-full bg-white p-6 shadow-md sm:rounded-lg"},ae={class:"text-xl font-semibold underline decoration-primary-color decoration-dotted decoration-2 underline-offset-2"},re={key:0},ce={key:1},ie=Q(" Category "),de={class:""},ue=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Category Name",-1),he={class:"mt-2"},pe=e("label",{for:"category",class:"block text-sm font-medium text-gray-700"},"Parent",-1),_e=e("option",{value:"null"},"no parent",-1),me=["value"],ge={key:0,class:"mt-2"},be=e("label",{class:"mb-2 block text-sm font-medium text-gray-900",for:"file_input"},"Image",-1),fe={class:"flex space-x-3"},ye={key:0,class:"h-10 w-10 overflow-hidden rounded-full"},ve=["src","alt"],xe=["required"],we={class:"mt-6"},ke={key:0,type:"button",disabled:"",class:"flex w-full transform items-center justify-center rounded-md bg-secondary-color px-4 py-2 tracking-wide text-white focus:outline-none"},Ce={key:1,type:"submit",class:"w-full transform rounded-md bg-primary-color px-4 py-2 text-sm tracking-wide text-white transition-colors duration-200 hover:bg-secondary-color focus:bg-primary-color focus:outline-none"},Ve={class:"lg:w-[60%]"},Ee={class:"relative w-full overflow-x-auto bg-white shadow-md sm:rounded-lg"},Ue={class:"items-center justify-between p-4 lg:flex"},Se={class:"mt-1 items-center space-y-1 lg:flex lg:space-y-0 lg:space-x-2"},$e=e("label",{for:"table-search",class:"sr-only"},"Search",-1),je={class:"relative"},Ae=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"h-5 w-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),Me={class:"mt-1 flex justify-end lg:mt-0 lg:block"},Ne=e("span",{class:"hidden text-sm font-thin lg:block"},"Supprimer",-1),Ie={class:"w-full text-left text-sm text-gray-500"},Te={class:"bg-gray-50 text-xs uppercase text-gray-700"},qe={scope:"col",class:"p-4"},De={class:"flex items-center"},Le=e("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox",-1),Be=e("th",{scope:"col",class:"px-6 py-3"},"Image",-1),ze=e("th",{scope:"col",class:"px-6 py-3"},"Name",-1),Fe=e("th",{scope:"col",class:"px-6 py-3"},"Is Top",-1),Oe=e("th",{scope:"col",class:"px-6 py-3"},[e("span",{class:"sr-only"},"Edit")],-1),Pe={key:0},Re={colspan:"4"},Ge={class:"flex w-full items-center justify-center p-3 text-center"},We={class:"border-b bg-white hover:bg-gray-50"},Xe={class:"w-4 p-4"},Ye={class:"flex items-center"},He=["onUpdate:modelValue","onChange"],Je=e("label",{for:"checkbox-table-search-1",class:"sr-only"},"checkbox",-1),Ke={class:"px-6 py-4"},Qe=["src","alt"],Ze={scope:"row",class:"whitespace-nowrap px-6 py-4 font-medium text-gray-900"},et={class:"w-4 p-4"},tt={class:"flex items-center"},st=["onUpdate:modelValue","onChange"],ot=e("label",{for:"checkbox-table-search-1",class:"sr-only"},"checkbox",-1),lt={class:"px-6 py-4 text-right"},nt=["onClick"],at={class:"w-4 p-4"},rt={class:"flex items-center"},ct=["onUpdate:modelValue","onChange"],it=e("label",{for:"checkbox-table-search-1",class:"sr-only"},"checkbox",-1),dt=e("td",{class:"py-4 pl-14"},[e("span",{class:"font-bold"},"----------")],-1),ut={scope:"row",class:"whitespace-nowrap px-6 py-4 font-medium text-gray-900"},ht=e("td",null,null,-1),pt={class:"px-6 py-4 text-right"},_t=["onClick"],mt={key:2},gt=e("td",{colspan:"4",class:"p-3 text-center text-2xl font-bold"},[e("span",null,"NO CATEGORY")],-1),bt=[gt],kt={__name:"Category",setup(ft){const{chks:h,chkAll:k,errors:C,loading:$,checkAll:q,categories:p,cleanErrors:D,toogleIsTop:L,getCategories:j,updateCategory:B,createCategory:z,deleteCategories:F,toogleDeleteArray:O,toogleChildDeleteArray:P}=Z(),o=W({name:"",image:"",parent:null}),_=y(null),V=y(!0),g=y(""),u=y(!1),R=async()=>{o.image=_.value.files[0]},G=async()=>{let n=new FormData;n.append("name",o.name),n.append("image",o.image),n.append("parent",o.parent),u.value?(n.append("_method","PUT"),await B(n,o.id),C.value.length==[]&&(u.value=!1)):await z(n),C.value.length==[]&&(await j(),o.image="",o.name="",o.parent=null,_.value?_.value.value=null:_.value=null)},A=X(()=>{let n=p.value.filter(s=>s.name.toLowerCase().includes(g.value.toLowerCase()));if(n.length!=0)return V.value=!0,n;V.value=!1,n=[];for(let s=0;s<p.value.length;s++)p.value[s].children.length!=0&&p.value[s].children.forEach(b=>{b.name.toLowerCase().includes(g.value.toLowerCase())&&n.push(b)});return n}),M=async n=>{o.image=n.image,o.name=n.name,o.parent=n.parent,o.id=n.id,u.value=!0};return Y(async()=>{await j()}),(n,s)=>{const b=T("Error"),N=T("Spin");return r(),a("div",te,[se,e("div",oe,[e("div",le,[e("div",ne,[e("h1",ae,[u.value?(r(),a("span",re,"Edit")):(r(),a("span",ce,"Add")),ie]),v(b,{errors:l(C),onCleanErrors:l(D)},null,8,["errors","onCleanErrors"]),e("form",{class:"mt-4",onSubmit:s[3]||(s[3]=H(t=>G(),["prevent"]))},[e("div",de,[ue,d(e("input",{type:"text",id:"name",required:"","onUpdate:modelValue":s[0]||(s[0]=t=>o.name=t),autocomplete:"given-name",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[I,o.name]])]),e("div",he,[pe,d(e("select",{id:"category",required:"","onUpdate:modelValue":s[1]||(s[1]=t=>o.parent=t),class:"mt-1 block w-full rounded-md border border-gray-300 bg-white py-2 px-3 text-sm shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500"},[_e,(r(!0),a(x,null,U(l(p),t=>(r(),a("option",{key:t.id,value:t.id},S(t.name),9,me))),128))],512),[[J,o.parent]])]),o.parent==null||o.parent=="null"?(r(),a("div",ge,[be,e("div",fe,[u.value&&typeof o.image=="string"?(r(),a("div",ye,[o.image?(r(),a("img",{key:0,src:o.image,alt:o.name,class:"h-full w-full object-cover"},null,8,ve)):m("",!0)])):m("",!0),e("input",{ref_key:"image",ref:_,required:!u.value,onChange:s[2]||(s[2]=t=>R()),accept:"image/*",class:"block w-full cursor-pointer rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 focus:outline-none",id:"file_input",type:"file"},null,40,xe)])])):m("",!0),e("div",we,[l($)==1?(r(),a("button",ke,[v(N)])):(r(),a("button",Ce," Save "))])],32)])]),e("div",Ve,[e("div",Ee,[e("div",Ue,[e("div",Se,[$e,e("div",je,[Ae,d(e("input",{type:"search",id:"table-search","onUpdate:modelValue":s[4]||(s[4]=t=>g.value=t),class:"block w-full rounded border border-gray-300 bg-gray-50 p-2.5 pl-10 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 lg:w-80",placeholder:"Search for items"},null,512),[[I,g.value]])])]),e("div",Me,[e("button",{type:"button",title:"delete",onClick:s[5]||(s[5]=t=>l(F)()),class:"flex items-center justify-between space-x-2 rounded border border-red-500 p-2 text-red-500 hover:bg-red-500 hover:text-white"},[v(l(ee),{class:"h-6 w-6"}),Ne])])]),e("table",Ie,[e("thead",Te,[e("tr",null,[e("th",qe,[e("div",De,[d(e("input",{onChange:s[6]||(s[6]=t=>l(q)()),"onUpdate:modelValue":s[7]||(s[7]=t=>K(k)?k.value=t:null),id:"checkbox-all-search",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,544),[[w,l(k)]]),Le])]),Be,ze,Fe,Oe])]),e("tbody",null,[l($)==1?(r(),a("tr",Pe,[e("td",Re,[e("div",Ge,[v(N,{width:"w-10",height:"h-10",color:"text-primary-color"})])])])):l(A).length!=0?(r(!0),a(x,{key:1},U(l(A),(t,i)=>(r(),a(x,{key:t.id},[e("tr",We,[e("td",Xe,[e("div",Ye,[d(e("input",{"onUpdate:modelValue":c=>l(h)[i].value=c,onChange:c=>l(O)(i),id:"checkbox-table-search-1",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,40,He),[[w,l(h)[i].value]]),Je])]),e("td",Ke,[e("img",{src:t.image,alt:t.name,class:"h-10 w-10 rounded-full object-cover"},null,8,Qe)]),e("td",Ze,S(t.name),1),e("td",et,[e("div",tt,[d(e("input",{"onUpdate:modelValue":c=>t.is_top=c,onChange:c=>l(L)(t.id),id:"checkbox-table-search-1",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,40,st),[[w,t.is_top]]),ot])]),e("td",lt,[e("button",{type:"button",onClick:c=>M(t),class:"font-medium text-blue-600 hover:underline"}," Edit ",8,nt)])]),V.value&&t.children.length!=0?(r(!0),a(x,{key:0},U(t.children,(c,f)=>(r(),a("tr",{key:c.id,class:"border-b bg-white hover:bg-gray-50"},[e("td",at,[e("div",rt,[l(h)[i].children[f]?d((r(),a("input",{key:0,id:"checkbox-table-search-1","onUpdate:modelValue":E=>l(h)[i].children[f].value=E,onChange:E=>l(P)(i,f),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:ring-2 focus:ring-blue-500"},null,40,ct)),[[w,l(h)[i].children[f].value]]):m("",!0),it])]),dt,e("th",ut,S(c.name),1),ht,e("td",pt,[e("button",{type:"button",onClick:E=>M(c),class:"font-medium text-blue-600 hover:underline"}," Edit ",8,_t)])]))),128)):m("",!0)],64))),128)):(r(),a("tr",mt,bt))])])])])])])}}};export{kt as default};
